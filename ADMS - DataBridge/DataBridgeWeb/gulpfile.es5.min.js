"use strict";var gulp=require("gulp"),path=require("path"),es=require("event-stream"),gutil=require("gulp-util"),less=require("gulp-less"),strip=require("gulp-strip-debug"),uglify=require("gulp-uglify"),concat=require("gulp-concat"),rename=require("gulp-rename"),jshint=require("gulp-jshint"),clearRequire=require("clear-require"),fs=require("fs");gulp.task("bundle-vendors-js",function(){return gulp.src(["js/vendors/jquery.js","js/vendors/angularJS/angular-1.5.7.js","js/vendors/angularJS/angular-animate-1.5.7.js","js/vendors/angularJS/angular-route.js","js/vendors/ui-bootstrap.js","js/vendors/bootstrap-datepicker.min.js","js/vendors/angularJS/**/*.js","js/vendors/plugins/**/*.js","js/vendors/**/*.js"]).pipe(concat("vendors.js")).pipe(gulp.dest("js/")).pipe(uglify()).pipe(rename({suffix:".min"})).pipe(gulp.dest("js/")).on("error",gutil.log)});gulp.task("bundle-databridge-js",function(){return gulp.src(["js/dataBridge/others/**/*.js","js/dataBridge/others/app.js","js/dataBridge/modules/*(.module)*.js","js/dataBridge/services/*(.service)*.js","js/dataBridge/factory/*(.factory)*.js","js/dataBridge/directives/*(.directive)*.js","js/dataBridge/controllers/controllers.js","js/dataBridge/controllers/*(.controller)*.js","!js/dataBridge/**/*.min.map","!js/dataBridge/**/*.min.js.map"]).pipe(concat("dataBridgeApp.js")).pipe(gulp.dest("js/")).pipe(uglify()).pipe(rename({suffix:".min"})).pipe(gulp.dest("js/")).on("error",gutil.log)});gulp.task("hinting-js",function(n){var t=!1,i=es.map(function(n,i){t||(t=!n.jshint.success);i(null,n)});gulp.src(["js/dataBridge/**/*.js","!js/dataBridge/**/*.min.js","!js/dataBridge/**/*.min.map","!js/dataBridge/**/*.min.js.map"]).pipe(jshint({loopfunc:!0,"-W041":!0,node:!0,undef:!0,unused:!0,evil:!0,shadow:!0,eqnull:!0,asi:!0})).pipe(jshint.reporter("jshint-stylish")).pipe(i).on("end",function(){if(t)return n(new gutil.PluginError("jshint","############## Failed JSHint, fix errors and warnings ##############",{showStack:!1}));n()})});gulp.task("watch-js",function(){gutil.log("JS Engine ",gutil.colors.magenta("Using JSHint engine for JavaScript validation"));gulp.watch(["js/dataBridge/**/*.js"],["bundle-databridge-js"])});